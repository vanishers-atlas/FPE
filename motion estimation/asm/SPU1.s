SETPARA_REGVALUE R29, 30000
SETPARA_REGVALUE R28, 16
SETPARA_PB0_ZERO
SETPARA_DIRECTWBEN_TRUE
SETPARA_BMASTER_NUM 2
SETPARA_OUTFIFODEPTH 2

NOP
RPT 32
MOV R0, R29
NOP
  BARRIERM 1
  MOV R1, ZERO
  RPT 32
  NOP
  NOP
    SETMASKLT R0, ^p(0)
      MOV R0, ^(0!)
      SUB R21, R28, R2
      SUB R20, R28, R1
    MASKEND
    ADD R1, R1, ONE
    NOP
  RPTEND
  
  ADD R2, R2, ONE
RPTEND
MOV R2, ZERO
PUT R20, ^0
PUT R21, ^0
BARRIERM 2